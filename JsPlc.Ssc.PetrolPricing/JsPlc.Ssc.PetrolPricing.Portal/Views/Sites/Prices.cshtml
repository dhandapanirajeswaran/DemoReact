@using JsPlc.Ssc.PetrolPricing.Models
@{
    ViewBag.Title = "Site Prices";
}

<h2>Site Prices</h2>

<div class="container" id="petrolpricingpage">
    <!-- knockout binds here -->
    <div id="msgs"></div>
    <!-- Submit disabled, all work done thru ajax calls -->
    <form id="myform" method="post" data-bind="submit: savePetrolPricingForm"
          xclass="input-group-sm" onsubmit="return false;">

        <span>Market Comparison: Sainsburys's prices and Competitors</span>
        <div class="table-responsive">
            <table class="table table-striped table-hover" id="accordion">
                <!-- HEADINGS -->
                <thead>
                    <!-- 11 column layout -->
                    <tr rowspan="2" style="background-color: silver">
                        <th colspan="1"><span>#</span></th>
                        <th><span>Store No.</span></th>
                        <th><span>Store Name</span></th>
                        <th><span>Cat No.</span></th>
                        <th><span>PFS No.</span></th>

                        <th colspan="2"><span class="fuelHeaderGroup">&nbsp;Unleaded&nbsp;</span></th>
                        <th colspan="2"><span class="fuelHeaderGroup">&nbsp;Diesel&nbsp;</span></th>
                        <th colspan="2"><span class="fuelHeaderGroup">&nbsp;LPG&nbsp;</span></th>
                    </tr>
                    <tr>
                        <th colspan="5"></th>
                        <th><span>Today</span></th>
                        <th><span>Tomorrow</span></th>
                        <th><span>Today</span></th>
                        <th><span>Tomorrow</span></th>
                        <th><span>Today</span></th>
                        <th><span>Tomorrow</span></th>
                    </tr>
                </thead>
                <tbody data-bind="with: dataModel, visible: dataAvailable">
                    <!-- Within a foreach JSStores loop -->
                    <!-- JS Store DataRows -->
                    
                    <tr class="panel-heading" role="tab" id="headingOne">
                        <td>
                            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#CollapseCompetitorsForSite102"></a>
                        </td>
                        <td><span data-bind="text: StoreNo">102</span></td>
                        <td><span data-bind="text: StoreName">Sainsburys Hendon</span></td>
                        <td><span data-bind="text: CatNo"></span>100</td>
                        <td><span data-bind="text: PFSNo"></span>99</td>

                        <td>
                            <span data-bind="text: FuelPriceToday">108.9</span>
                        </td>
                        <td>
                            <i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i>&nbsp;<span data-bind="text: FuelPriceTomorrowAutoCalc">107.9</span>
                            <input type="text" data-bind="value: FuelPriceTomorrowOverridden" class="txtPrice" />
                        <td>
                            <span data-bind="text: FuelPriceToday">108.9</span>

                        </td>
                        <td>
                            <i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i>&nbsp;<span data-bind="text: FuelPriceTomorrowAutoCalc">107.9</span>
                            <input type="text" data-bind="value: FuelPriceTomorrowOverridden" class="txtPrice" />
                        </td>
                        <td>
                            <span data-bind="text: FuelPriceToday">108.9</span>
                        </td>
                        <td>
                            <i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i>&nbsp;<span data-bind="text: FuelPriceTomorrowAutoCalc">107.9</span>
                            <input type="text" data-bind="value: FuelPriceTomorrowOverridden" class="txtPrice" />
                        </td>
                    </tr>
                    <tr id="CollapseCompetitorsForSite102" class="panel-collapse collapse" role="tabpanel">
                        <td colspan="11" align="right">
                            <!-- Competitors table -->
                            <table class="competitorTable table-striped table-hover">
                                <thead>
                                    <tr rowspan="2">
                                        <th><span>Brand</span></th>
                                        <th><span>Marker</span></th>
                                        <th><span>Drive-Time</span></th>
                                        <th><span>Cat No.</span></th>

                                        <th colspan="2" class="tblHighlight"><span class="fuelHeaderGroup">&nbsp;Unleaded&nbsp;</span></th>
                                        <th colspan="2"><span class="fuelHeaderGroup">&nbsp;Diesel&nbsp;</span></th>
                                        <th colspan="2" class="tblHighlight"><span class="fuelHeaderGroup">&nbsp;LPG&nbsp;</span></th>
                                    </tr>
                                    <tr>
                                        <th colspan="4"></th>
                                        <th class="tblHighlight"><span>Yesterday</span></th>
                                        <th class="tblHighlight"><span>Today</span></th>
                                        <th><span>Yesterday</span></th>
                                        <th><span>Today</span></th>
                                        <th class="tblHighlight"><span>Yesterday</span></th>
                                        <th class="tblHighlight"><span>Today</span></th>

                                    </tr>
                                </thead>
                                <tbody data-bind="with: competitors, visible: hasCompetitors">
                                    <!-- Within a foreach CompStores loop -->
                                    <!-- Comp Store DataRows -->
                                    <tr>
                                        <td><span data-bind="text: Brand">Asda</span></td>
                                        <td><span data-bind="text: CompetitorStoreName">Asda Compton</span></td>
                                        <td><span data-bind="text: DriveTime"></span>2.45min</td>
                                        <td><span data-bind="text: CatNo"></span>1336</td>

                                        <td class="tblHighlight"><span data-bind="text: FuelPriceYesterday">109.9</span></td>
                                        <td class="tblHighlight"><i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i><span data-bind="text: FuelPriceToday">107.9</span></td>

                                        <td><span data-bind="text: FuelPriceYesterday">108.9</span></td>
                                        <td><i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i><span data-bind="text: FuelPriceToday">106.9</span></td>

                                        <td class="tblHighlight"><span data-bind="text: FuelPriceYesterday">108.9</span></td>
                                        <td class="tblHighlight"><i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i><span data-bind="text: FuelPriceToday">106.9</span></td>

                                    </tr>
                                    <tr>
                                        <td><span data-bind="text: Brand">Tesco</span></td>
                                        <td><span data-bind="text: CompetitorStoreName">Tesco Green Park</span></td>
                                        <td><span data-bind="text: DriveTime"></span>4.10min</td>
                                        <td><span data-bind="text: CatNo"></span>1336</td>

                                        <td class="tblHighlight"><span data-bind="text: FuelPriceYesterday">109.9</span></td>
                                        <td class="tblHighlight"><i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i><span data-bind="text: FuelPriceToday">107.9</span></td>

                                        <td><span data-bind="text: FuelPriceYesterday">108.9</span></td>
                                        <td><i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i><span data-bind="text: FuelPriceToday">106.9</span></td>

                                        <td class="tblHighlight"><span data-bind="text: FuelPriceYesterday">108.9</span></td>
                                        <td class="tblHighlight"><i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i><span data-bind="text: FuelPriceToday">106.9</span></td>

                                    </tr>
                                </tbody>
                                <tbody data-bind="visible: false" style="visibility: hidden; display: none">
                                    <tr>
                                        <td colspan="10" class="noSiteData">Sorry, no site data available</td>
                                    </tr>
                                </tbody>

                            </table>
                        </td>
                    </tr>

                    <!-- Next site TODO Remove this once knockout foreach is in place -->
                    <tr class="panel-heading" role="tab" id="headingTwo">
                        <td>
                            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#CollapseCompetitorsforsite202"></a>
                        </td>
                        <td><span data-bind="text: StoreNo">202</span></td>
                        <td><span data-bind="text: StoreName">Sainsburys Hendon</span></td>
                        <td><span data-bind="text: CatNo"></span>200</td>
                        <td><span data-bind="text: PFSNo"></span>199</td>

                        <td>
                            <span data-bind="text: FuelPriceToday">108.9</span>
                        </td>
                        <td>
                            <i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i>&nbsp;<span data-bind="text: FuelPriceTomorrowAutoCalc">107.9</span>
                            <input type="text" data-bind="value: FuelPriceTomorrowOverridden" class="txtPrice" />
                        <td>
                            <span data-bind="text: FuelPriceToday">108.9</span>

                        </td>
                        <td>
                            <i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i>&nbsp;<span data-bind="text: FuelPriceTomorrowAutoCalc">107.9</span>
                            <input type="text" data-bind="value: FuelPriceTomorrowOverridden" class="txtPrice" />
                        </td>
                        <td>
                            <span data-bind="text: FuelPriceToday">108.9</span>
                        </td>
                        <td>
                            <i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i>&nbsp;<span data-bind="text: FuelPriceTomorrowAutoCalc">107.9</span>
                            <input type="text" data-bind="value: FuelPriceTomorrowOverridden" class="txtPrice" />
                        </td>
                    </tr>
                    <tr id="CollapseCompetitorsforsite202" class="panel-collapse collapse" role="tabpanel">

                        <td colspan="11" align="right">
                            <!-- Competitors table -->
                            <table class="competitorTable table-striped table-hover">
                                <thead>
                                    <tr rowspan="2">
                                        <th><span>Brand</span></th>
                                        <th><span>Marker</span></th>
                                        <th><span>Drive-Time</span></th>
                                        <th><span>Cat No.</span></th>

                                        <th colspan="2" class="tblHighlight"><span class="fuelHeaderGroup">&nbsp;Unleaded&nbsp;</span></th>
                                        <th colspan="2"><span class="fuelHeaderGroup">&nbsp;Diesel&nbsp;</span></th>
                                        <th colspan="2" class="tblHighlight"><span class="fuelHeaderGroup">&nbsp;LPG&nbsp;</span></th>
                                    </tr>
                                    <tr>
                                        <th colspan="4"></th>
                                        <th class="tblHighlight"><span>Yesterday</span></th>
                                        <th class="tblHighlight"><span>Today</span></th>
                                        <th><span>Yesterday</span></th>
                                        <th><span>Today</span></th>
                                        <th class="tblHighlight"><span>Yesterday</span></th>
                                        <th class="tblHighlight"><span>Today</span></th>

                                    </tr>
                                </thead>
                                <tbody data-bind="with: competitors, visible: hasCompetitors">
                                    <!-- Within a foreach CompStores loop -->
                                    <!-- Comp Store DataRows -->
                                    <tr>
                                        <td><span data-bind="text: Brand">Asda</span></td>
                                        <td><span data-bind="text: CompetitorStoreName">Asda Compton</span></td>
                                        <td><span data-bind="text: DriveTime"></span>2.45min</td>
                                        <td><span data-bind="text: CatNo"></span>1336</td>

                                        <td class="tblHighlight"><span data-bind="text: FuelPriceYesterday">109.9</span></td>
                                        <td class="tblHighlight"><i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i>&nbsp;<span data-bind="text: FuelPriceToday">107.9</span></td>

                                        <td><span data-bind="text: FuelPriceYesterday">108.9</span></td>
                                        <td><i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i>&nbsp;<span data-bind="text: FuelPriceToday">106.9</span></td>

                                        <td class="tblHighlight"><span data-bind="text: FuelPriceYesterday">108.9</span></td>
                                        <td class="tblHighlight"><i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i>&nbsp;<span data-bind="text: FuelPriceToday">106.9</span></td>

                                    </tr>
                                    <tr>
                                        <td><span data-bind="text: Brand">Tesco</span></td>
                                        <td><span data-bind="text: CompetitorStoreName">Tesco Green Park</span></td>
                                        <td><span data-bind="text: DriveTime"></span>4.10min</td>
                                        <td><span data-bind="text: CatNo"></span>1336</td>

                                        <td class="tblHighlight"><span data-bind="text: FuelPriceYesterday">109.9</span></td>
                                        <td class="tblHighlight"><i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i><span data-bind="text: FuelPriceToday">107.9</span></td>

                                        <td><span data-bind="text: FuelPriceYesterday">108.9</span></td>
                                        <td><i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i><span data-bind="text: FuelPriceToday">106.9</span></td>

                                        <td class="tblHighlight"><span data-bind="text: FuelPriceYesterday">108.9</span></td>
                                        <td class="tblHighlight"><i class="fa fa-arrow-circle-o-down" style="color:red;font-size:100%;"></i><span data-bind="text: FuelPriceToday">106.9</span></td>

                                    </tr>
                                </tbody>
                                <tbody data-bind="visible: false" style="visibility: hidden; display: none">
                                    <tr>
                                        <td colspan="10" class="noSiteData">Sorry, no site data available</td>
                                    </tr>
                                </tbody>

                            </table>
                        </td>
                    </tr>

                </tbody>
                <tbody data-bind="visible: !dataAvailable" style="visibility: hidden; display: none">
                    <tr>
                        <td colspan="10" class="noSiteData">Sorry, no site data available</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </form>



</div>

<br />

<script type="text/javascript">
    require(["SitePricing"]); // TODO Uncomment to fireup calls to get/send data
</script>

