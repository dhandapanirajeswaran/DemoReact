@using JsPlc.Ssc.PetrolPricing.Models
@model JsPlc.Ssc.PetrolPricing.Models.SiteViewModel

@*
    <div class="modal fade" id="emailSite" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         data-bind="with: emailPopupSiteItemModel, visible: showEmailPopup">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Send Email</h4>
                    <h5 style="color: red" data-bind="visible: pageHasUnsavedChanges">The prices shown are UNSAVED. The email will NOT be sent with these unsaved prices. If you wish to send these prices, please close this popup and click "Save Prices" first.</h5>
                </div>
                <div class="modal-body smaller">
                    <div class="row">
                        <div class="col-md-3">
                            <label for="mnuEmailTemplate">Email Template: </label>
                        </div>
                        <div class="col-md-6">
                            <select id="mnuEmailTemplate" class="form-control" data-bind="value: selectedEmailTemplateId, options: emailTemplates, optionsValue: 'EmailTemplateId', optionsText: function(item) {
        return item.TemplateName + (item.IsDefault ? '**' : '');
        }">
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-primary btn-sm" data-bind="click: editEmailTemplateClick" data-infotip="Edit Email Template"><i class="fa fa-edit"></i> Edit</button>
                        </div>
                    </div>

                    <div class="alert alert-info" data-bind="visible: isLoadingEmailTemplates()">
                        Loading Email Template...
                    </div>

                    <div id="EmailPopupPreviewPanel" data-bind="visible: !isLoadingEmailTemplates(), html: emailTemplateHtml">
                    </div>

                    <hr />
                    <h1>TESTING</h1>

                    <h2 style="visibility: hidden; display: none">
                        kSiteName:<span data-bind="text: kSiteName"></span>
                        kStartDateMonthYear:<span data-bind="text: kStartDateMonthYear"></span>
                        kUnleadedPrice:<span data-bind="text: kUnleadedPrice"></span>
                        kDieselPrice:<span data-bind="text: kDieselPrice"></span>
                        showEmailSiteButton:<span data-bind="text: showEmailSiteButton"></span>
                        <input type="button" data-bind="click: emailSendClick" value="Test send click" />
                    </h2> <!-- debug view -->
                    <h1>FAO Store/duty manager - URGENT FUEL PRICE CHANGE</h1>
                    <p>Queries to the Trading Hotline using Option 1 Trading, Option 2 Grocery and Option 8 Petrol and Kiosk </p>
                    <h2><span id="kSiteName" data-bind="text: kSiteName"></span></h2>
                    <p>
                        <strong>
                            Petrol price changes, effective end of trade
                            <span id="kStartDateMonthYear" data-bind="text: kStartDateMonthYear"></span>
                        </strong>
                    </p>
                    <table class="font125pc">
                        <tr><td><strong>Product</strong></td><td><strong>New Price</strong></td></tr>
                        <tr><td>Unleaded&nbsp;</td><td>&nbsp;<span id="kUnleadedPrice" data-bind="text: kUnleadedPrice"></span></td></tr>
                        <tr><td>Super (if applicable)&nbsp;</td><td>&nbsp;<span id="kSuperPrice" data-bind="text: kSuperPrice"></span></td></tr>
                        <tr><td>Diesel&nbsp;</td><td>&nbsp;<span id="kDieselPrice" data-bind="text: kDieselPrice"></span></td></tr>
                    </table>
                    <br />
                    <ul>
                        <li>All fuel price changes must be actioned at the end of trade only</li>
                        <li>Colleague actioning the price change must ensure the changes have applied on the pumps, enter the time of the change and then sign as confirmation before filing this message at the PFS</li>
                        <li>Ensure you enter the new prices correctly into REPOS e.g. If the price is 129.90ppl, then enter 129.90 in the new price field (make sure there are no fuel sales outstanding on the REPOS system or pumps before making the price change, <strong>ALL</strong> working pumps <strong>MUST</strong> be left <strong>ON</strong> and nozzle placed in the pump holders)</li>
                        <li>You are reminded that only fuel price changes sent to you by email should be actioned. Please ignore REPOS price change reports.</li>
                    </ul>
                    <h3>24 hour sites</h3>
                    <ul>
                        <li>Action the price change in conjunction with the REPOS EOD routine between midnight and 2am. Colleague actioning the price change must ensure that the changes have applied on the pumps, enter the time of the change and then sign as confirmation before filing this message at the PFS.</li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <h5 style="color: red" data-bind="visible: pageHasUnsavedChanges">The prices shown are UNSAVED. The email will NOT be sent with these unsaved prices. If you wish to send these prices, please close this popup and click "Save Prices" first.</h5>
                    <button type="button" class="btn btn-default" data-dismiss="modal" data-bind="click: hideEmailPopup">Cancel</button>
                    <input type="button" class="btn btn-primary" value="Email Site"
                           id="EmailSiteButton" onclick="" data-dismiss="modal" data-bind="visible: showEmailSiteButton, click: emailSendClick" />
                </div>
            </div>
        </div>
    </div>
*@