@model IEnumerable<JsPlc.Ssc.PetrolPricing.Models.ViewModels.NearbySiteViewModel>
@{ 
    Layout = null;
}

<div class="panel panel-info">
    <div class="panel-heading">
        <h4><i class="fa fa-rss-square"></i> Nearby Sites</h4>
    </div>
    
    <div class="panel-body">

        <table class="table table-striped table-condensed nearby-competitor-sites">
            <thead>
                <tr>
                    <th rowspan="2"></th>
                    <th rowspan="2">Brand</th>
                    <th rowspan="2">Site Name</th>
                    <th rowspan="2">Town</th>
                    <th rowspan="2">PostCode</th>
                    <th rowspan="2">Distance</th>
                    <th rowspan="2">Drive Time</th>
                    <th colspan="3" class="text-center">Drive Time Markup</th>
                </tr>

                <tr>
                    <th class="text-center" style="width: 12%;">
                        <span class="fuel-sign fuel-sign-unleaded"></span>
                    </th>
                    <th class="text-center" style="width: 12%;">
                        <span class="fuel-sign fuel-sign-diesel"></span>
                    </th>
                    <th class="text-center" style="width: 12%;">
                        <span class="fuel-sign fuel-sign-super-unleaded"></span>
                    </th>
                </tr>

            </thead>
            <tbody>
                @if (!Model.Any())
                {
                    <tr>
                        <td colspan="10" class="font125pc text-center text-bold">Sorry, there are no nearby <span style="color: orange;">Sainsburys</span> sites</td>
                    </tr>
                }

                @foreach (var comp in Model)
                {
                    var rowClass = comp.IsActive ? "row-active" : "row-inactive";

                    <tr class="@(rowClass)">
                        <td>
                            @if (comp.IsActive)
                            {
                                <span class="text-success" data-infotip="Site is [u]Active[/u]"><i class="fa fa-check"></i></span>
                            }
                            else
                            {
                                <span class="text-danger" data-infotip="Site is [i]Inactive[/i]"><i class="fa fa-times"></i></span>
                            }
                        </td>
                        <td>
                            <span class="text-bold" style="color: orange">@(comp.Brand)</span>
                        </td>
                        <td>
                            <a class="text-bold" style="color: orange;" href="@Url.Action("Details","Sites", new { id = comp.CompetitorSiteId})" data-infotip="View details for [em]@(comp.SiteName)[/em]">@(comp.SiteName)</a>
                        </td>
                        <td>@(comp.Town)</td>
                        <td>@(comp.PostCode)</td>
                        <td class="text-center" data-infotip="Distance is [b]@(String.Format("{0:0.00}", comp.Distance))[/b] Miles">@(String.Format("{0:0.00}", comp.Distance))</td>
                        <td class="text-center" data-infotip="Drive Time is [b]@(String.Format("{0:0.00}", comp.DriveTime))[/b] Minutes">@(String.Format("{0:0.00}", comp.DriveTime))</td>
                        <td class="text-center">+@(comp.UnleadedDriveTimeMarkup)p</td>
                        <td class="text-center">+@(comp.DieselDriveTimeMarkup)p</td>
                        <td class="text-center">+@(comp.SuperUnleadedDriveTimeMarkup)p</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>